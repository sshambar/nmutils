#!/bin/bash

#
# Placeholder to display what systemctl would have done
#

SYSTEMCTL_MOCK_FAIL=${SYSTEMCTL_MOCK_FAIL-}

err() {
  printf >&2 "%s\n" "$*"
}

fail() {
  local -i rc=1 IFS; unset IFS
  printf 2>/dev/null -v rc "%d" "$1"
  [[ $rc == 0 ]] && rc=1
  shift
  err "$*"
  exit "$rc"
}

[[ ${SYSTEMCTL_MOCK_FAIL} ]] &&
  fail "${SYSTEMCTL_MOCK_FAIL}" "systemctl mock fail ${SYSTEMCTL_MOCK_FAIL}"

[[ ${MOCK_ECHO} ]] && echo "${0##*/} $*"

exit 0
